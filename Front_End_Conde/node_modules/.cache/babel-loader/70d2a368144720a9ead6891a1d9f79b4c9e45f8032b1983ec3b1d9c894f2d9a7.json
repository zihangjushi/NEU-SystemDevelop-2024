{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, reactive, getCurrentInstance, onMounted } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { Management, UserFilled } from \"@element-plus/icons-vue\";\nimport axios from 'axios';\nimport { format, parseISO, isAfter, isBefore } from \"date-fns\";\nimport * as XLSX from 'xlsx';\nimport { useStore } from \"vuex\";\nexport default {\n  components: {\n    Management,\n    UserFilled\n  },\n  setup() {\n    const tableData = ref([]);\n    const currentPage = ref(1); // 当前页码\n    const pageSize = 7; // 每页显示条目数\n    const totalMeetings = ref(0); // 总会议条目数\n    const input1 = ref('');\n    const input2 = ref('');\n    const value1 = ref('');\n    const pagedTableData = ref([]);\n    const store = useStore();\n    const userInfo = ref({\n      userName: '',\n      phoneNumber: '',\n      email: '',\n      departmentId: '',\n      role: '',\n      createTime: '',\n      password: ''\n    });\n    const form = reactive({\n      name: '',\n      region: '',\n      images: [] // 新增此行以保存上传的图片\n    });\n    const dialogImageUrl = ref('');\n    const dialogVisible = ref(false);\n    const dialogVisible1 = ref(false);\n    const disabled = ref(false);\n    const fetchMeetings = async () => {\n      try {\n        const response = await axios.get('http://localhost:8090/api/meetings/all');\n        if (response.data.code === '0') {\n          tableData.value = response.data.data.map(meeting => ({\n            meetingId: meeting.meetingId,\n            meetingTitle: meeting.meetingTitle,\n            meetingDescription: meeting.meetingDescription,\n            organizer: meeting.organizer,\n            state: meeting.state,\n            startTime: meeting.startTime,\n            endTime: meeting.endTime\n          }));\n          totalMeetings.value = tableData.value.length;\n          updatePagedTableData();\n        } else {\n          console.error('Failed to fetch meetings:', response.data.msg);\n        }\n      } catch (error) {\n        console.error('Error fetching meetings:', error);\n      }\n    };\n\n    // 自动获取会议列表\n    fetchMeetings();\n    const router = useRouter();\n    const multipleTable = ref(null);\n    const pickerOptions = reactive({\n      disabledDate(time) {\n        return time.getTime() > Date.now();\n      },\n      shortcuts: [{\n        text: '今天',\n        onClick(picker) {\n          picker.emit('pick', new Date());\n        }\n      }, {\n        text: '昨天',\n        onClick(picker) {\n          const date = new Date();\n          date.setTime(date.getTime() - 3600 * 1000 * 24);\n          picker.emit('pick', date);\n        }\n      }, {\n        text: '一周前',\n        onClick(picker) {\n          const date = new Date();\n          date.setTime(date.getTime() - 3600 * 1000 * 24 * 7);\n          picker.emit('pick', date);\n        }\n      }],\n      multipleSelection: []\n    });\n    const toggleSelection = rows => {\n      if (rows) {\n        rows.forEach(row => {\n          multipleTable.value.toggleRowSelection(row);\n        });\n      } else {\n        multipleTable.value.clearSelection();\n      }\n    };\n    const handleSelectionChange = val => {\n      pickerOptions.multipleSelection = val;\n      selectedMeetings.value = val;\n    };\n    const selectedMeeting = ref(null);\n    const handleView = (index, row) => {\n      selectedMeeting.value = row;\n      dialogVisible.value = true;\n      console.log(index, row);\n    };\n    const handleEdit = (index, row) => {\n      router.push({\n        path: `/meetingEdit/${row.meetingId}` // 使用动态路径参数\n      });\n    };\n    const handleDelete = (index, row) => {\n      // 确认删除操作\n      proxy.$confirm(`确认删除会议 \"${row.meetingTitle}\" 吗？`, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        try {\n          // 发送删除请求，假设后端接口接受 DELETE 请求，且传递会议 ID\n          const response = await axios.delete(`http://localhost:8090/api/meetings/${row.meetingId}`);\n          if (response.data.code === '0') {\n            // 删除成功后更新前端视图\n            const startIndex = (currentPage.value - 1) * pageSize; // 当前页的起始索引\n            const dataIndex = startIndex + index; // 获取在 tableData.value 中的索引位置\n            tableData.value.splice(dataIndex, 1); // 从 tableData 中删除对应会议\n            totalMeetings.value--; // 总会议数减一\n            updatePagedTableData(); // 更新分页数据\n            // 调用删除文件的接口，假设后端接口为 deleteFile\n            let deleteFileResponse = null;\n            const formats = ['jpg', 'png', 'jpeg'];\n            for (let format of formats) {\n              try {\n                deleteFileResponse = await axios.delete(`http://localhost:8090/api/deleteFile/${row.meetingTitle}.${format}`);\n              } catch (e) {\n                // Ignore the error and try the next format\n              }\n            }\n            if (deleteFileResponse.status === 200) {\n              proxy.$message.success('会议删除成功');\n            } else {\n              proxy.$message.error('会议删除成功，但相关文件删除失败，请联系管理员');\n            }\n          } else {\n            proxy.$message.error('删除失败：' + response.data.msg);\n          }\n        } catch (error) {\n          console.error('删除会议失败：', error);\n          proxy.$message.error('删除会议失败，请稍后重试');\n        }\n      }).catch(() => {\n        proxy.$message.info('已取消删除');\n      });\n    };\n    const personalCenter = () => {\n      router.push('/userCenter');\n    };\n    const back = () => {\n      router.push('/login');\n    };\n    const handleRemove = file => {\n      console.log(file);\n    };\n    const handlePictureCardPreview = file => {\n      dialogImageUrl.value = file.url;\n      dialogVisible.value = true;\n    };\n    const meetingAdd = () => {\n      router.push('/meetingAdd');\n    };\n\n    // 更新分页数据\n    const updatePagedTableData = () => {\n      const start = (currentPage.value - 1) * pageSize;\n      const end = start + pageSize;\n      pagedTableData.value = tableData.value.slice(start, end);\n    };\n\n    // 处理分页器切换页码事件\n    const handleCurrentChange = newPage => {\n      currentPage.value = newPage;\n      updatePagedTableData();\n    };\n    // 格式化会议内容\n    const formatMeetingDescription = description => {\n      if (!description) return '';\n\n      // 将 <img> 标签替换为 [图片]\n      const withoutImages = description.replace(/<img[^>]*>/g, \"[图片]\");\n\n      // 去除 HTML 标签\n      const withoutTags = withoutImages.replace(/<[^>]+>/g, '');\n\n      // 截取长度，并添加省略号\n      if (withoutTags.length > 32) {\n        return withoutTags.substring(0, 32) + '...';\n      } else {\n        return withoutTags;\n      }\n    };\n\n    // 格式化日期\n    const formatDate = startTime => {\n      if (!startTime) return ''; // 处理 startTime 为空的情况\n      try {\n        const parsedDate = parseISO(startTime);\n        return format(parsedDate, 'yyyy-MM-dd HH:mm:ss');\n      } catch (error) {\n        console.error('Error parsing or formatting date:', error);\n        return ''; // 如果日期解析或格式化出错，返回空字符串\n      }\n    };\n    const computeMeetingState = (startTime, endTime) => {\n      const now = new Date();\n      const start = parseISO(startTime);\n      const end = parseISO(endTime);\n      if (isBefore(now, start)) {\n        return '未开始';\n      } else if (isAfter(now, end)) {\n        return '已结束';\n      } else {\n        return '进行中';\n      }\n    };\n    const {\n      proxy\n    } = getCurrentInstance();\n    // 处理搜索事件\n    const handleSearch = () => {\n      // 根据输入的会议名称进行筛选\n      const meetingTitleTerm = input1.value.trim(); // 获取输入的会议名称并去除首尾空格\n      const organizerTerm = input2.value.trim(); // 获取输入的创建人并去除首尾空格\n      const startTimeTerm = value1.value ? format(value1.value, 'yyyy-MM-dd') : '';\n      if (meetingTitleTerm === '' && organizerTerm === '' && startTimeTerm === '') {\n        // 如果搜索框为空，则返回信息\n        proxy.$message.error('搜索框为空！');\n      } else {\n        // 否则，根据会议名称和创建人进行筛选\n        tableData.value = tableData.value.filter(meeting => (meetingTitleTerm === '' || meeting.meetingTitle.includes(meetingTitleTerm)) && (organizerTerm === '' || meeting.organizer.includes(organizerTerm)) && (startTimeTerm === '' || meeting.startTime.includes(startTimeTerm)));\n      }\n      // 更新表格数据和总条目数\n      totalMeetings.value = tableData.value.length;\n      // 重置当前页码为第一页\n      currentPage.value = 1;\n      updatePagedTableData();\n    };\n\n    // 处理重置事件\n    const handleReset = () => {\n      input1.value = '';\n      input2.value = '';\n      value1.value = '';\n      fetchMeetings(); // 重置后重新获取所有会议列表\n    };\n    const getMeetingCoverUrl = meetingTitle => {\n      //const basePath = '@/assets/'; // 替换为实际图片路径\n      const formats = ['jpg', 'png', 'jpeg'];\n      for (let format of formats) {\n        try {\n          return require(`@/assets/${meetingTitle}.${format}`);\n        } catch (e) {\n          // Ignore the error and try the next format\n        }\n      }\n      return `default.jpg`; // 默认图片路径\n    };\n    const exportMeetings = () => {\n      // 获取要导出的数据\n      const exportData = tableData.value.map(meeting => ({\n        '会议Id': meeting.meetingId,\n        '会议名称': meeting.meetingTitle,\n        '创建人': meeting.organizer,\n        '会议状态': computeMeetingState(meeting.startTime, meeting.endTime),\n        '会议内容': meeting.meetingDescription,\n        '开始时间': formatDate(meeting.startTime),\n        '结束时间': formatDate(meeting.endTime)\n      }));\n\n      // 构造确认消息框\n      proxy.$confirm('确认下载当前会议列表文件吗？', '确认下载', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'info'\n      }).then(() => {\n        console.log(exportData);\n        // 创建工作簿并添加工作表\n        const ws = XLSX.utils.json_to_sheet(exportData);\n        const wb = XLSX.utils.book_new();\n        XLSX.utils.book_append_sheet(wb, ws, '会议列表');\n        // 生成 Excel 文件并触发下载\n        XLSX.writeFile(wb, '会议列表.xlsx');\n      }).catch(() => {\n        proxy.$message.info('已取消下载');\n      });\n    };\n    const selectedMeetings = ref([]);\n    const handleBatchEdit = () => {\n      if (selectedMeetings.value.length === 0) {\n        proxy.$message.warning('请先选择要编辑的会议');\n        return;\n      }\n      // 如果只选中了一个会议，则直接跳转\n      if (selectedMeetings.value.length === 1) {\n        const meeting = selectedMeetings.value[0];\n        router.push({\n          path: `/meetingEdit/${meeting.meetingId}` // 使用会议 ID 或其他唯一标识作为动态路径参数\n        });\n      } else {\n        // 如果选中了多个会议，则在新标签页中打开每个会议的编辑页面\n        selectedMeetings.value.forEach(meeting => {\n          window.open(`/meetingEdit/${meeting.meetingId}`, '_blank');\n        });\n      }\n    };\n    const handleBatchDelete = async () => {\n      // 检查是否有选中的会议\n      if (selectedMeetings.value.length === 0) {\n        proxy.$message.warning('请先选择要删除的会议');\n        return;\n      }\n      await proxy.$confirm(`确认删除所选中 ${selectedMeetings.value.length} 条会议吗？`, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        try {\n          const deletePromises = selectedMeetings.value.map(async meeting => {\n            try {\n              // 发送删除请求，后端接口接受 DELETE 请求，且传递会议 ID\n              const response = await axios.delete(`http://localhost:8090/api/meetings/${meeting.meetingId}`);\n              if (response.data.code === '0') {\n                // 删除成功后更新前端视图\n                const index = pagedTableData.value.findIndex(item => item.meetingId === meeting.meetingId);\n                if (index !== -1) {\n                  const startIndex = (currentPage.value - 1) * pageSize; // 当前页的起始索引\n                  const dataIndex = startIndex + index; // 获取在 tableData.value 中的索引位置\n                  tableData.value.splice(dataIndex, 1); // 从 tableData 中删除对应会议\n                  totalMeetings.value--; // 总会议数减一\n                  updatePagedTableData(); // 更新分页数据\n\n                  // 调用删除文件的接口，假设后端接口为 deleteFile\n                  let deleteFileResponse = null;\n                  const formats = ['jpg', 'png', 'jpeg'];\n                  for (let format of formats) {\n                    try {\n                      deleteFileResponse = await axios.delete(`http://localhost:8090/api/deleteFile/${meeting.meetingTitle}.${format}`);\n                    } catch (e) {\n                      // Ignore the error and try the next format\n                    }\n                  }\n                  if (deleteFileResponse && deleteFileResponse.status === 200) {\n                    proxy.$message.success(`会议 \"${meeting.meetingTitle}\" 删除成功`);\n                  } else {\n                    proxy.$message.error(`会议 \"${meeting.meetingTitle}\" 删除成功，但相关文件删除失败，请联系管理员`);\n                  }\n                }\n              } else {\n                proxy.$message.error(`会议 \"${meeting.meetingTitle}\" 删除失败：` + response.data.msg);\n              }\n            } catch (error) {\n              console.error(`会议 \"${meeting.meetingTitle}\" 删除失败：`, error);\n              proxy.$message.error(`会议 \"${meeting.meetingTitle}\" 删除失败，请稍后重试`);\n            }\n          });\n          // 等待所有删除操作完成\n          await Promise.all(deletePromises);\n          // 更新批量删除成功的消息提示\n          proxy.$message.success('批量删除成功');\n        } catch (error) {\n          console.error('批量删除失败：', error);\n          proxy.$message.error('批量删除失败，请稍后重试');\n        }\n      }).catch(() => {\n        proxy.$message.info('已取消批量删除');\n      });\n    };\n    const fetchUserInfo = async () => {\n      const username = store.state.username;\n      try {\n        const response = await axios.get(`http://localhost:8090/users/${username}`);\n        const data = response.data;\n        userInfo.value = data.data;\n      } catch (error) {\n        console.error('Failed to fetch user info', error);\n      }\n    };\n    onMounted(fetchUserInfo);\n    const loginUser = ref('');\n    onMounted(async () => {\n      await Promise.all([loginUser.value = store.state.user]);\n    });\n    return {\n      tableData,\n      pickerOptions,\n      value1,\n      input1,\n      input2,\n      multipleTable,\n      toggleSelection,\n      handleSelectionChange,\n      handleView,\n      handleEdit,\n      handleDelete,\n      personalCenter,\n      back,\n      dialogVisible,\n      dialogVisible1,\n      form,\n      handlePictureCardPreview,\n      handleRemove,\n      disabled,\n      meetingAdd,\n      formatDate,\n      computeMeetingState,\n      pagedTableData,\n      currentPage,\n      pageSize,\n      totalMeetings,\n      handleCurrentChange,\n      handleSearch,\n      handleReset,\n      formatMeetingDescription,\n      selectedMeeting,\n      getMeetingCoverUrl,\n      exportMeetings,\n      handleBatchEdit,\n      handleBatchDelete,\n      userInfo,\n      store,\n      fetchUserInfo,\n      loginUser\n    };\n  }\n};","map":{"version":3,"names":["ref","reactive","getCurrentInstance","onMounted","useRouter","Management","UserFilled","axios","format","parseISO","isAfter","isBefore","XLSX","useStore","components","setup","tableData","currentPage","pageSize","totalMeetings","input1","input2","value1","pagedTableData","store","userInfo","userName","phoneNumber","email","departmentId","role","createTime","password","form","name","region","images","dialogImageUrl","dialogVisible","dialogVisible1","disabled","fetchMeetings","response","get","data","code","value","map","meeting","meetingId","meetingTitle","meetingDescription","organizer","state","startTime","endTime","length","updatePagedTableData","console","error","msg","router","multipleTable","pickerOptions","disabledDate","time","getTime","Date","now","shortcuts","text","onClick","picker","emit","date","setTime","multipleSelection","toggleSelection","rows","forEach","row","toggleRowSelection","clearSelection","handleSelectionChange","val","selectedMeetings","selectedMeeting","handleView","index","log","handleEdit","push","path","handleDelete","proxy","$confirm","confirmButtonText","cancelButtonText","type","then","delete","startIndex","dataIndex","splice","deleteFileResponse","formats","e","status","$message","success","catch","info","personalCenter","back","handleRemove","file","handlePictureCardPreview","url","meetingAdd","start","end","slice","handleCurrentChange","newPage","formatMeetingDescription","description","withoutImages","replace","withoutTags","substring","formatDate","parsedDate","computeMeetingState","handleSearch","meetingTitleTerm","trim","organizerTerm","startTimeTerm","filter","includes","handleReset","getMeetingCoverUrl","require","exportMeetings","exportData","ws","utils","json_to_sheet","wb","book_new","book_append_sheet","writeFile","handleBatchEdit","warning","window","open","handleBatchDelete","deletePromises","findIndex","item","Promise","all","fetchUserInfo","username","loginUser","user"],"sources":["C:\\Users\\dell\\Documents\\GitHub\\NEU-SystemDevelop-2024\\Front_End_Conde\\src\\views\\MeetingManage.vue"],"sourcesContent":["<template>\r\n  <div class=\"about\">\r\n    <el-container style=\"height: 100vh; border: 1px solid #ffffff\">\r\n      <el-aside class=\"menu-with-shadow\" width=\"200px\" style=\"color: rgb(255,255,255);z-index: 10;\">\r\n        <el-menu :default-openeds=\"['3']\">\r\n          <el-menu-item index=\"1\">\r\n            <template #title>\r\n              <img src=\"@/assets/logo1.png\" style=\"width: 40px; height: 40px; margin-right: 5px;\">\r\n              <span style=\"font-size: 20px;\"><strong>测盟汇</strong></span>\r\n            </template>\r\n          </el-menu-item>\r\n\r\n          <el-menu-item index=\"2\">\r\n            <template #title>\r\n              <el-icon>\r\n                <HomeFilled/>\r\n              </el-icon>\r\n              首页\r\n            </template>\r\n          </el-menu-item>\r\n\r\n          <el-sub-menu index=\"3\">\r\n            <template #title>\r\n              <el-icon>\r\n                <Menu/>\r\n              </el-icon>\r\n              管理\r\n            </template>\r\n            <el-menu-item-group>\r\n              <el-menu-item index=\"3-1\">\r\n                <el-icon>\r\n                  <UserFilled/>\r\n                </el-icon>\r\n                用户管理\r\n              </el-menu-item>\r\n              <el-menu-item index=\"3-2\">\r\n                <el-icon>\r\n                  <Management/>\r\n                </el-icon>\r\n                部门管理\r\n              </el-menu-item>\r\n              <el-menu-item index=\"3-3\">\r\n                <el-icon>\r\n                  <Orange/>\r\n                </el-icon>\r\n                行业动态管理\r\n              </el-menu-item>\r\n              <el-menu-item index=\"3-4\">\r\n                <el-icon>\r\n                  <List/>\r\n                </el-icon>\r\n                课程管理\r\n              </el-menu-item>\r\n              <el-menu-item index=\"3-5\">\r\n                <el-icon>\r\n                  <TrendCharts/>\r\n                </el-icon>\r\n                会议管理\r\n              </el-menu-item>\r\n            </el-menu-item-group>\r\n          </el-sub-menu>\r\n        </el-menu>\r\n      </el-aside>\r\n\r\n      <el-container>\r\n        <el-header class=\"header-with-shadow\" style=\"font-size: 12px\">\r\n          <div style=\"display: flex; justify-content: space-between; width: 100%;\">\r\n            <div style=\"text-align: left;position: relative; top: 20px;\">\r\n              <el-breadcrumb separator=\"/\">\r\n                <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n                <el-breadcrumb-item><a href=\"http://localhost:8080/meeting\">会议管理</a></el-breadcrumb-item>\r\n                <el-breadcrumb-item>会议列表</el-breadcrumb-item>\r\n              </el-breadcrumb>\r\n            </div>\r\n            <el-dropdown :hide-on-click=\"false\">\r\n              <div style=\"display: flex; align-items: center;\">\r\n                <el-avatar icon=\"UserFilled\"\r\n                           style=\"font-size: 20px; margin-right: 10px;position: relative; top: 8px;\"></el-avatar>\r\n                <el-button type=\"text\" style=\"font-size: 15px; color: rgb(0,0,0);position: relative; top: 8px;\">\r\n                  {{ loginUser.userName }}\r\n                </el-button>\r\n              </div>\r\n              <template #dropdown>\r\n                <el-dropdown-menu>\r\n                  <el-dropdown-item @click=\"personalCenter\">个人中心</el-dropdown-item>\r\n                  <el-dropdown-item @click=\"back\">退出登录</el-dropdown-item>\r\n                </el-dropdown-menu>\r\n              </template>\r\n            </el-dropdown>\r\n          </div>\r\n        </el-header>\r\n\r\n\r\n        <el-main class=\"main-content\">\r\n          <div style=\"text-align: left;\">\r\n            <span style=\"color: rgb(150,150,150)\"><strong>会议名称</strong></span>\r\n            <el-input v-model=\"input1\" placeholder=\"请输入内容\"\r\n                      style=\"margin-left: 5px;width: 200px;height: 30px;\"></el-input>\r\n            <span style=\"color: rgb(150,150,150);margin-left: 15px;\"><strong>创建人</strong></span>\r\n            <el-input v-model=\"input2\" placeholder=\"请输入内容\"\r\n                      style=\"margin-left: 5px;width: 200px;height: 30px;\"></el-input>\r\n            <span style=\"color: rgb(150,150,150);margin-left: 15px;\"><strong>开始时间</strong></span>\r\n            <el-date-picker v-model=\"value1\" type=\"date\" placeholder=\"选择日期\" style=\"margin-left: 5px;\">\r\n            </el-date-picker>\r\n            <el-button type=\"primary\" style=\"margin-left: 15px;\" icon=\"Search\" @click=\"handleSearch\">搜索</el-button>\r\n            <el-button plain style=\"margin-left: 15px;\" icon=\"Refresh\" @click=\"handleReset\">重置</el-button>\r\n          </div>\r\n          <el-row style=\"text-align: left;\">\r\n            <el-button type=\"primary\" plain icon=\"Plus\" style=\"margin-top: 5px\" @click=\"meetingAdd\">新增</el-button>\r\n            <el-button type=\"success\" plain icon=\"Edit\" style=\"margin-top: 5px\" @click=\"handleBatchEdit\">修改\r\n            </el-button>\r\n            <el-button type=\"danger\" plain icon=\"Delete\" style=\"margin-top: 5px\" @click=\"handleBatchDelete\">删除\r\n            </el-button>\r\n            <el-button type=\"warning\" plain icon=\"Download\" style=\"margin-top: 5px\" @click=\"exportMeetings\">导出\r\n            </el-button>\r\n          </el-row>\r\n          <div class=\"custom-table\" style=\"margin-top: 10px;\">\r\n            <el-table ref=\"multipleTable\" :header-cell-style=\"{height: '30px',background: '#f0f0f0'}\" :row-style=\"{ height: '66px' }\"\r\n                      :data=\"pagedTableData\" tooltip-effect=\"dark\" style=\"width: 100%;\" class=\"custom-table\"\r\n                      @selection-change=\"handleSelectionChange\">\r\n              <el-table-column type=\"selection\" width=\"55\"></el-table-column>\r\n              <el-table-column prop=\"meetingTitle\" label=\"会议名称\" width=\"250\" header-align=\"center\"\r\n                               align=\"center\"></el-table-column>\r\n              <el-table-column prop=\"organizer\" label=\"创建人\" width=\"100\" header-align=\"center\"\r\n                               align=\"center\"></el-table-column>\r\n              <el-table-column prop=\"state\" label=\"会议状态\" width=\"100\" header-align=\"center\" align=\"center\">\r\n                <template #default=\"scope\">\r\n                  {{ computeMeetingState(scope.row.startTime, scope.row.endTime) }}\r\n                </template>\r\n              </el-table-column>\r\n\r\n              <el-table-column prop=\"meetingDescription\" label=\"会议内容\" width=\"250\" header-align=\"center\"\r\n                               align=\"center\">\r\n                <template #default=\"{ row }\">\r\n                  {{ formatMeetingDescription(row.meetingDescription) }}\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column\r\n                  prop=\"startTime\"\r\n                  label=\"开始时间\"\r\n                  width=\"200\"\r\n                  header-align=\"center\"\r\n                  align=\"center\"\r\n              >\r\n                <template #default=\"scope\">\r\n                  {{ formatDate(scope.row.startTime) }}\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column prop=\"operate\" label=\"操作\" header-align=\"center\" align=\"center\">\r\n                <template #default=\"scope\">\r\n                  <el-button size=\"mini\" type=\"primary\" icon=\"View\" @click=\"handleView(scope.$index, scope.row);\">查看\r\n                  </el-button>\r\n                  <el-button size=\"mini\" type=\"success\" icon=\"Edit\" @click=\"handleEdit(scope.$index, scope.row)\">修改\r\n                  </el-button>\r\n                  <el-button size=\"mini\" type=\"danger\" icon=\"Delete\" @click=\"handleDelete(scope.$index, scope.row)\">\r\n                    删除\r\n                  </el-button>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n          </div>\r\n          <el-dialog v-model=\"dialogVisible\" title=\"会议内容\" width=\"800\">\r\n            <div>\r\n              <p style=\"text-align: left;\"><strong>会议名称：</strong>{{ selectedMeeting.meetingTitle }}</p>\r\n              <p style=\"text-align: left;\"><strong>会议封面：</strong>\r\n                <el-image\r\n                    style=\"width: 100px; height: 100px;\"\r\n                    :src=\"getMeetingCoverUrl(selectedMeeting.meetingTitle)\"\r\n                    fit=\"cover\"\r\n                    alt=\"会议封面\"\r\n                ></el-image>\r\n              </p>\r\n              <p style=\"text-align: left;\"><strong>创建人：</strong>{{ selectedMeeting.organizer }}</p>\r\n              <p style=\"text-align: left;\"><strong>开始时间：</strong>{{ formatDate(selectedMeeting.startTime) }}</p>\r\n              <p style=\"text-align: left;\"><strong>结束时间：</strong>{{ formatDate(selectedMeeting.endTime) }}</p>\r\n              <p style=\"text-align: left;\"><strong>会议内容：</strong><span\r\n                  v-html=\"selectedMeeting.meetingDescription\"></span></p>\r\n            </div>\r\n            <template #footer>\r\n              <div class=\"dialog-footer\">\r\n\r\n                <el-button type=\"primary\" @click=\"dialogVisible = false\">\r\n                  确定\r\n                </el-button>\r\n              </div>\r\n            </template>\r\n          </el-dialog>\r\n\r\n        </el-main>\r\n        <div class=\"container\" style=\"grid-template-rows: auto 1fr auto;\">\r\n          <el-config-provider :locale=\"zhCn\">\r\n            <el-pagination\r\n                @size-change=\"handleSizeChange\"\r\n                @current-change=\"handleCurrentChange\"\r\n                :current-page=\"currentPage4\"\r\n                layout=\"total, prev, pager, next, jumper\"\r\n                :total=totalMeetings\r\n                background\r\n                style=\"grid-row: 3; margin-bottom: 15px; justify-content: flex-end;margin-right: 50px\"\r\n            ></el-pagination>\r\n          </el-config-provider>\r\n        </div>\r\n      </el-container>\r\n    </el-container>\r\n  </div>\r\n\r\n</template>\r\n\r\n\r\n\r\n\r\n\r\n<script>\r\nimport {ref, reactive, getCurrentInstance, onMounted} from 'vue';\r\nimport {useRouter} from 'vue-router';\r\nimport {Management, UserFilled} from \"@element-plus/icons-vue\";\r\nimport axios from 'axios';\r\nimport {format, parseISO, isAfter, isBefore} from \"date-fns\";\r\nimport * as XLSX from 'xlsx';\r\nimport {useStore} from \"vuex\";\r\n\r\n\r\nexport default {\r\n  components: {Management, UserFilled},\r\n  setup() {\r\n    const tableData = ref([]);\r\n    const currentPage = ref(1); // 当前页码\r\n    const pageSize = 7; // 每页显示条目数\r\n    const totalMeetings = ref(0); // 总会议条目数\r\n    const input1 = ref('');\r\n    const input2 = ref('');\r\n    const value1 = ref('');\r\n    const pagedTableData = ref([]);\r\n    const store = useStore();\r\n    const userInfo = ref({\r\n      userName: '',\r\n      phoneNumber: '',\r\n      email: '',\r\n      departmentId: '',\r\n      role: '',\r\n      createTime: '',\r\n      password: '',\r\n    });\r\n    const form = reactive({\r\n      name: '',\r\n      region: '',\r\n      images: [] // 新增此行以保存上传的图片\r\n    });\r\n    const dialogImageUrl = ref('');\r\n    const dialogVisible = ref(false);\r\n    const dialogVisible1 = ref(false);\r\n    const disabled = ref(false);\r\n\r\n    const fetchMeetings = async () => {\r\n      try {\r\n        const response = await axios.get('http://localhost:8090/api/meetings/all');\r\n        if (response.data.code === '0') {\r\n          tableData.value = response.data.data.map(meeting => ({\r\n            meetingId: meeting.meetingId,\r\n            meetingTitle: meeting.meetingTitle,\r\n            meetingDescription: meeting.meetingDescription,\r\n            organizer: meeting.organizer,\r\n            state: meeting.state,\r\n            startTime: meeting.startTime,\r\n            endTime: meeting.endTime,\r\n          }));\r\n          totalMeetings.value = tableData.value.length;\r\n          updatePagedTableData();\r\n        } else {\r\n          console.error('Failed to fetch meetings:', response.data.msg);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching meetings:', error);\r\n      }\r\n    };\r\n\r\n    // 自动获取会议列表\r\n    fetchMeetings();\r\n\r\n    const router = useRouter();\r\n\r\n    const multipleTable = ref(null);\r\n    const pickerOptions = reactive({\r\n      disabledDate(time) {\r\n        return time.getTime() > Date.now();\r\n      },\r\n      shortcuts: [{\r\n        text: '今天',\r\n        onClick(picker) {\r\n          picker.emit('pick', new Date());\r\n        }\r\n      }, {\r\n        text: '昨天',\r\n        onClick(picker) {\r\n          const date = new Date();\r\n          date.setTime(date.getTime() - 3600 * 1000 * 24);\r\n          picker.emit('pick', date);\r\n        }\r\n      }, {\r\n        text: '一周前',\r\n        onClick(picker) {\r\n          const date = new Date();\r\n          date.setTime(date.getTime() - 3600 * 1000 * 24 * 7);\r\n          picker.emit('pick', date);\r\n        }\r\n      }],\r\n      multipleSelection: []\r\n    });\r\n\r\n    const toggleSelection = (rows) => {\r\n      if (rows) {\r\n        rows.forEach(row => {\r\n          multipleTable.value.toggleRowSelection(row);\r\n        });\r\n      } else {\r\n        multipleTable.value.clearSelection();\r\n      }\r\n    };\r\n\r\n    const handleSelectionChange = (val) => {\r\n      pickerOptions.multipleSelection = val;\r\n      selectedMeetings.value = val;\r\n    };\r\n\r\n    const selectedMeeting = ref(null);\r\n\r\n    const handleView = (index, row) => {\r\n      selectedMeeting.value = row;\r\n      dialogVisible.value = true;\r\n      console.log(index, row);\r\n    };\r\n\r\n    const handleEdit = (index, row) => {\r\n      router.push({\r\n        path: `/meetingEdit/${row.meetingId}` // 使用动态路径参数\r\n      });\r\n    };\r\n\r\n    const handleDelete = (index, row) => {\r\n      // 确认删除操作\r\n      proxy.$confirm(`确认删除会议 \"${row.meetingTitle}\" 吗？`, '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning',\r\n      }).then(async () => {\r\n        try {\r\n          // 发送删除请求，假设后端接口接受 DELETE 请求，且传递会议 ID\r\n          const response = await axios.delete(`http://localhost:8090/api/meetings/${row.meetingId}`);\r\n          if (response.data.code === '0') {\r\n            // 删除成功后更新前端视图\r\n            const startIndex = (currentPage.value - 1) * pageSize; // 当前页的起始索引\r\n            const dataIndex = startIndex + index; // 获取在 tableData.value 中的索引位置\r\n            tableData.value.splice(dataIndex, 1); // 从 tableData 中删除对应会议\r\n            totalMeetings.value--; // 总会议数减一\r\n            updatePagedTableData(); // 更新分页数据\r\n            // 调用删除文件的接口，假设后端接口为 deleteFile\r\n            let deleteFileResponse = null;\r\n            const formats = ['jpg', 'png', 'jpeg'];\r\n            for (let format of formats) {\r\n              try {\r\n                deleteFileResponse = await axios.delete(`http://localhost:8090/api/deleteFile/${row.meetingTitle}.${format}`);\r\n              } catch (e) {\r\n                // Ignore the error and try the next format\r\n              }\r\n            }\r\n            if (deleteFileResponse.status === 200) {\r\n              proxy.$message.success('会议删除成功');\r\n            } else {\r\n              proxy.$message.error('会议删除成功，但相关文件删除失败，请联系管理员');\r\n            }\r\n          } else {\r\n            proxy.$message.error('删除失败：' + response.data.msg);\r\n          }\r\n        } catch (error) {\r\n          console.error('删除会议失败：', error);\r\n          proxy.$message.error('删除会议失败，请稍后重试');\r\n        }\r\n      }).catch(() => {\r\n        proxy.$message.info('已取消删除');\r\n      });\r\n    };\r\n\r\n    const personalCenter = () => {\r\n      router.push('/userCenter');\r\n    };\r\n\r\n    const back = () => {\r\n      router.push('/login');\r\n    };\r\n\r\n    const handleRemove = (file) => {\r\n      console.log(file);\r\n    };\r\n\r\n    const handlePictureCardPreview = (file) => {\r\n      dialogImageUrl.value = file.url;\r\n      dialogVisible.value = true;\r\n    };\r\n\r\n    const meetingAdd = () => {\r\n      router.push('/meetingAdd');\r\n    };\r\n\r\n    // 更新分页数据\r\n    const updatePagedTableData = () => {\r\n      const start = (currentPage.value - 1) * pageSize;\r\n      const end = start + pageSize;\r\n      pagedTableData.value = tableData.value.slice(start, end);\r\n    };\r\n\r\n    // 处理分页器切换页码事件\r\n    const handleCurrentChange = (newPage) => {\r\n      currentPage.value = newPage;\r\n      updatePagedTableData();\r\n    };\r\n    // 格式化会议内容\r\n    const formatMeetingDescription = (description) => {\r\n      if (!description) return '';\r\n\r\n      // 将 <img> 标签替换为 [图片]\r\n      const withoutImages = description.replace(/<img[^>]*>/g, \"[图片]\");\r\n\r\n      // 去除 HTML 标签\r\n      const withoutTags = withoutImages.replace(/<[^>]+>/g, '');\r\n\r\n      // 截取长度，并添加省略号\r\n      if (withoutTags.length > 32) {\r\n        return withoutTags.substring(0, 32) + '...';\r\n      } else {\r\n        return withoutTags;\r\n      }\r\n    };\r\n\r\n\r\n    // 格式化日期\r\n    const formatDate = (startTime) => {\r\n      if (!startTime) return ''; // 处理 startTime 为空的情况\r\n      try {\r\n        const parsedDate = parseISO(startTime);\r\n        return format(parsedDate, 'yyyy-MM-dd HH:mm:ss');\r\n      } catch (error) {\r\n        console.error('Error parsing or formatting date:', error);\r\n        return ''; // 如果日期解析或格式化出错，返回空字符串\r\n      }\r\n    };\r\n\r\n    const computeMeetingState = (startTime, endTime) => {\r\n      const now = new Date();\r\n      const start = parseISO(startTime);\r\n      const end = parseISO(endTime);\r\n\r\n      if (isBefore(now, start)) {\r\n        return '未开始';\r\n      } else if (isAfter(now, end)) {\r\n        return '已结束';\r\n      } else {\r\n        return '进行中';\r\n      }\r\n    };\r\n    const {proxy} = getCurrentInstance();\r\n    // 处理搜索事件\r\n    const handleSearch = () => {\r\n      // 根据输入的会议名称进行筛选\r\n      const meetingTitleTerm = input1.value.trim(); // 获取输入的会议名称并去除首尾空格\r\n      const organizerTerm = input2.value.trim(); // 获取输入的创建人并去除首尾空格\r\n      const startTimeTerm = value1.value ? format(value1.value, 'yyyy-MM-dd') : '';\r\n      if (meetingTitleTerm === '' && organizerTerm === '' && startTimeTerm === '') {\r\n        // 如果搜索框为空，则返回信息\r\n        proxy.$message.error('搜索框为空！');\r\n      } else {\r\n        // 否则，根据会议名称和创建人进行筛选\r\n        tableData.value = tableData.value.filter(meeting =>\r\n            (meetingTitleTerm === '' || meeting.meetingTitle.includes(meetingTitleTerm)) &&\r\n            (organizerTerm === '' || meeting.organizer.includes(organizerTerm)) &&\r\n            (startTimeTerm === '' || meeting.startTime.includes(startTimeTerm))\r\n        );\r\n      }\r\n      // 更新表格数据和总条目数\r\n      totalMeetings.value = tableData.value.length;\r\n      // 重置当前页码为第一页\r\n      currentPage.value = 1;\r\n      updatePagedTableData();\r\n    };\r\n\r\n    // 处理重置事件\r\n    const handleReset = () => {\r\n      input1.value = '';\r\n      input2.value = '';\r\n      value1.value = '';\r\n      fetchMeetings(); // 重置后重新获取所有会议列表\r\n    };\r\n\r\n    const getMeetingCoverUrl = (meetingTitle) => {\r\n      //const basePath = '@/assets/'; // 替换为实际图片路径\r\n      const formats = ['jpg', 'png', 'jpeg'];\r\n      for (let format of formats) {\r\n        try {\r\n          return require(`@/assets/${meetingTitle}.${format}`);\r\n        } catch (e) {\r\n          // Ignore the error and try the next format\r\n        }\r\n      }\r\n      return `default.jpg`; // 默认图片路径\r\n    };\r\n\r\n    const exportMeetings = () => {\r\n      // 获取要导出的数据\r\n      const exportData = tableData.value.map(meeting => ({\r\n        '会议Id': meeting.meetingId,\r\n        '会议名称': meeting.meetingTitle,\r\n        '创建人': meeting.organizer,\r\n        '会议状态': computeMeetingState(meeting.startTime, meeting.endTime),\r\n        '会议内容': meeting.meetingDescription,\r\n        '开始时间': formatDate(meeting.startTime),\r\n        '结束时间': formatDate(meeting.endTime),\r\n      }));\r\n\r\n      // 构造确认消息框\r\n      proxy.$confirm('确认下载当前会议列表文件吗？', '确认下载', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'info',\r\n      }).then(() => {\r\n        console.log(exportData);\r\n        // 创建工作簿并添加工作表\r\n        const ws = XLSX.utils.json_to_sheet(exportData);\r\n        const wb = XLSX.utils.book_new();\r\n        XLSX.utils.book_append_sheet(wb, ws, '会议列表');\r\n        // 生成 Excel 文件并触发下载\r\n        XLSX.writeFile(wb, '会议列表.xlsx');\r\n      }).catch(() => {\r\n        proxy.$message.info('已取消下载');\r\n      });\r\n    };\r\n\r\n    const selectedMeetings = ref([]);\r\n    const handleBatchEdit = () => {\r\n      if (selectedMeetings.value.length === 0) {\r\n        proxy.$message.warning('请先选择要编辑的会议');\r\n        return;\r\n      }\r\n      // 如果只选中了一个会议，则直接跳转\r\n      if (selectedMeetings.value.length === 1) {\r\n        const meeting = selectedMeetings.value[0];\r\n        router.push({\r\n          path: `/meetingEdit/${meeting.meetingId}` // 使用会议 ID 或其他唯一标识作为动态路径参数\r\n        });\r\n      } else {\r\n        // 如果选中了多个会议，则在新标签页中打开每个会议的编辑页面\r\n        selectedMeetings.value.forEach(meeting => {\r\n          window.open(`/meetingEdit/${meeting.meetingId}`, '_blank');\r\n        });\r\n      }\r\n    };\r\n    const handleBatchDelete = async () => {\r\n      // 检查是否有选中的会议\r\n      if (selectedMeetings.value.length === 0) {\r\n        proxy.$message.warning('请先选择要删除的会议');\r\n        return;\r\n      }\r\n      await proxy\r\n          .$confirm(`确认删除所选中 ${selectedMeetings.value.length} 条会议吗？`, '提示', {\r\n            confirmButtonText: '确定',\r\n            cancelButtonText: '取消',\r\n            type: 'warning',\r\n          })\r\n          .then(async () => {\r\n            try {\r\n              const deletePromises = selectedMeetings.value.map(async (meeting) => {\r\n                try {\r\n                  // 发送删除请求，后端接口接受 DELETE 请求，且传递会议 ID\r\n                  const response = await axios.delete(`http://localhost:8090/api/meetings/${meeting.meetingId}`);\r\n                  if (response.data.code === '0') {\r\n                    // 删除成功后更新前端视图\r\n                    const index = pagedTableData.value.findIndex(item => item.meetingId === meeting.meetingId);\r\n                    if (index !== -1) {\r\n                      const startIndex = (currentPage.value - 1) * pageSize; // 当前页的起始索引\r\n                      const dataIndex = startIndex + index; // 获取在 tableData.value 中的索引位置\r\n                      tableData.value.splice(dataIndex, 1); // 从 tableData 中删除对应会议\r\n                      totalMeetings.value--; // 总会议数减一\r\n                      updatePagedTableData(); // 更新分页数据\r\n\r\n                      // 调用删除文件的接口，假设后端接口为 deleteFile\r\n                      let deleteFileResponse = null;\r\n                      const formats = ['jpg', 'png', 'jpeg'];\r\n                      for (let format of formats) {\r\n                        try {\r\n                          deleteFileResponse = await axios.delete(`http://localhost:8090/api/deleteFile/${meeting.meetingTitle}.${format}`);\r\n                        } catch (e) {\r\n                          // Ignore the error and try the next format\r\n                        }\r\n                      }\r\n                      if (deleteFileResponse && deleteFileResponse.status === 200) {\r\n                        proxy.$message.success(`会议 \"${meeting.meetingTitle}\" 删除成功`);\r\n                      } else {\r\n                        proxy.$message.error(`会议 \"${meeting.meetingTitle}\" 删除成功，但相关文件删除失败，请联系管理员`);\r\n                      }\r\n                    }\r\n                  } else {\r\n                    proxy.$message.error(`会议 \"${meeting.meetingTitle}\" 删除失败：` + response.data.msg);\r\n                  }\r\n                } catch (error) {\r\n                  console.error(`会议 \"${meeting.meetingTitle}\" 删除失败：`, error);\r\n                  proxy.$message.error(`会议 \"${meeting.meetingTitle}\" 删除失败，请稍后重试`);\r\n                }\r\n              });\r\n              // 等待所有删除操作完成\r\n              await Promise.all(deletePromises);\r\n              // 更新批量删除成功的消息提示\r\n              proxy.$message.success('批量删除成功');\r\n            } catch (error) {\r\n              console.error('批量删除失败：', error);\r\n              proxy.$message.error('批量删除失败，请稍后重试');\r\n            }\r\n          })\r\n          .catch(() => {\r\n            proxy.$message.info('已取消批量删除');\r\n          });\r\n    };\r\n\r\n    const fetchUserInfo = async () => {\r\n      const username = store.state.username;\r\n      try {\r\n        const response = await axios.get(`http://localhost:8090/users/${username}`);\r\n        const data = response.data;\r\n        userInfo.value = data.data;\r\n\r\n      } catch (error) {\r\n        console.error('Failed to fetch user info', error);\r\n      }\r\n    };\r\n    onMounted(fetchUserInfo);\r\n\r\n\r\n    const loginUser = ref('')\r\n    onMounted(async () => {\r\n      await Promise.all([\r\n        loginUser.value = store.state.user,\r\n\r\n      ])\r\n    });\r\n    return {\r\n      tableData,\r\n      pickerOptions,\r\n      value1,\r\n      input1,\r\n      input2,\r\n      multipleTable,\r\n      toggleSelection,\r\n      handleSelectionChange,\r\n      handleView,\r\n      handleEdit,\r\n      handleDelete,\r\n      personalCenter,\r\n      back,\r\n      dialogVisible,\r\n      dialogVisible1,\r\n      form,\r\n      handlePictureCardPreview,\r\n      handleRemove,\r\n      disabled,\r\n      meetingAdd,\r\n      formatDate,\r\n      computeMeetingState,\r\n      pagedTableData,\r\n      currentPage,\r\n      pageSize,\r\n      totalMeetings,\r\n      handleCurrentChange,\r\n      handleSearch,\r\n      handleReset,\r\n      formatMeetingDescription,\r\n      selectedMeeting,\r\n      getMeetingCoverUrl,\r\n      exportMeetings,\r\n      handleBatchEdit,\r\n      handleBatchDelete,\r\n      userInfo,\r\n      store,\r\n      fetchUserInfo,\r\n      loginUser,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.main-content {\r\n  overflow: hidden; /* 隐藏主要内容区域的滚动条 */\r\n}\r\n\r\n.menu-with-shadow {\r\n  box-shadow: 5px 0px 6px rgba(0.5, 0.5, 0, 0.5);\r\n}\r\n\r\n.header-with-shadow {\r\n  box-shadow: 0px 0px 3px rgba(0, 0, 0, 0.5);\r\n}\r\n\r\nabout {\r\n  overflow-y: hidden; /* 隐藏垂直滚动条 */\r\n}\r\n\r\n</style>\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}